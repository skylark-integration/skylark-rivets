/**
 * skylark-rivets - A version of rivets.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-rivets/
 * @license MIT
 */
define(["./rivets"],function(t){return t.View=function(){var i=function(t,i){return function(){return t.apply(i,arguments)}};function n(n,e,s){var r,o,h,u,l,p,d,f,a,c,g,b,v;for(this.els=n,this.models=e,null==s&&(s={}),this.update=i(this.update,this),this.publish=i(this.publish,this),this.sync=i(this.sync,this),this.unbind=i(this.unbind,this),this.bind=i(this.bind,this),this.select=i(this.select,this),this.traverse=i(this.traverse,this),this.build=i(this.build,this),this.buildBinding=i(this.buildBinding,this),this.bindingRegExp=i(this.bindingRegExp,this),this.options=i(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),l=0,d=(a=t.extensions).length;l<d;l++){if(this[o=a[l]]={},s[o])for(r in c=s[o])h=c[r],this[o][r]=h;for(r in g=t.public[o])h=g[r],null==(u=this[o])[r]&&(u[r]=h)}for(p=0,f=(b=t.options).length;p<f;p++)this[o=b[p]]=null!=(v=s[o])?v:t.public[o];this.build()}return n.prototype.options=function(){var i,n,e,s,r;for(n={},e=0,s=(r=t.extensions.concat(t.options)).length;e<s;e++)n[i=r[e]]=this[i];return n},n.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},n.prototype.buildBinding=function(i,n,e,s){var r,o,h,u,l,p,d;return l={},d=function(){var t,i,n,e;for(e=[],t=0,i=(n=s.match(/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g)).length;t<i;t++)p=n[t],e.push(p.trim());return e}(),u=(r=function(){var t,i,n,e;for(e=[],t=0,i=(n=d.shift().split("<")).length;t<i;t++)o=n[t],e.push(o.trim());return e}()).shift(),l.formatters=d,(h=r.shift())&&(l.dependencies=h.split(/\s+/)),this.bindings.push(new t[i](this,n,e,u,l))},n.prototype.build=function(){var i,n,e,s,r,o;for(this.bindings=[],o=this,n=function(i){var e,s,r,h,u,l,p,d,f,a,c,g,b;if(3===i.nodeType){if(u=t.TextTemplateParser,(r=o.templateDelimiters)&&(d=u.parse(i.data,r)).length&&(1!==d.length||d[0].type!==u.types.text)){for(f=0,c=d.length;f<c;f++)p=d[f],l=document.createTextNode(p.value),i.parentNode.insertBefore(l,i),1===p.type&&o.buildBinding("TextBinding",l,null,p.value);i.parentNode.removeChild(i)}}else 1===i.nodeType&&(e=o.traverse(i));if(!e)for(b=function(){var t,n,e,s;for(s=[],t=0,n=(e=i.childNodes).length;t<n;t++)h=e[t],s.push(h);return s}(),a=0,g=b.length;a<g;a++)s=b[a],n(s)},e=0,s=(r=this.els).length;e<s;e++)i=r[e],n(i);this.bindings.sort(function(t,i){var n,e;return((null!=(n=i.binder)?n.priority:void 0)||0)-((null!=(e=t.binder)?e.priority:void 0)||0)})},n.prototype.traverse=function(i){var n,e,s,r,o,h,u,l,p,d,f,a,c,g,b;for(r=this.bindingRegExp(),o="SCRIPT"===i.nodeName||"STYLE"===i.nodeName,p=0,f=(c=i.attributes).length;p<f;p++)if(n=c[p],r.test(n.name)){if(u=n.name.replace(r,""),!(s=this.binders[u]))for(h in g=this.binders)l=g[h],"*"!==h&&-1!==h.indexOf("*")&&new RegExp("^"+h.replace(/\*/g,".+")+"$").test(u)&&(s=l);s||(s=this.binders["*"]),s.block&&(o=!0,e=[n])}for(d=0,a=(b=e||i.attributes).length;d<a;d++)n=b[d],r.test(n.name)&&(u=n.name.replace(r,""),this.buildBinding("Binding",i,u,n.value));return o||(u=i.nodeName.toLowerCase(),this.components[u]&&!i._bound&&(this.bindings.push(new t.ComponentBinding(this,i,u)),o=!0)),o},n.prototype.select=function(t){var i,n,e,s,r;for(r=[],n=0,e=(s=this.bindings).length;n<e;n++)t(i=s[n])&&r.push(i);return r},n.prototype.bind=function(){var t,i,n;for(t=0,i=(n=this.bindings).length;t<i;t++)n[t].bind()},n.prototype.unbind=function(){var t,i,n;for(t=0,i=(n=this.bindings).length;t<i;t++)n[t].unbind()},n.prototype.sync=function(){var t,i,n,e;for(i=0,n=(e=this.bindings).length;i<n;i++)"function"==typeof(t=e[i]).sync&&t.sync()},n.prototype.publish=function(){var t,i,n;for(t=0,i=(n=this.select(function(t){var i;return null!=(i=t.binder)?i.publishes:void 0})).length;t<i;t++)n[t].publish()},n.prototype.update=function(t){var i,n,e,s,r,o;for(n in null==t&&(t={}),t)e=t[n],this.models[n]=e;for(s=0,r=(o=this.bindings).length;s<r;s++)"function"==typeof(i=o[s]).update&&i.update(t)},n}(),{View:t.View}});
//# sourceMappingURL=sourcemaps/views.js.map
