{"version":3,"sources":["binders.js"],"names":["define","Rivets","__indexOf","indexOf","binders","text","el","value","textContent","innerText","html","innerHTML","show","style","display","hide","enabled","disabled","checked","publishes","priority","bind","Util","bindEvent","this","publish","unbind","unbindEvent","routine","_ref1","type","toString","unchecked","tagName","event","o","_i","_len","_ref2","_ref3","_results","setAttribute","window","jQuery","val","length","push","selected","call","block","attr","declaration","marker","view","prefix","join","replace","getAttribute","document","createComment","bound","removeAttribute","parentNode","insertBefore","removeChild","nested","key","model","models","View","options","nextSibling","update","unless","function","handler","args","eventHandler","iterated","collection","binding","data","index","modelName","previous","template","_j","_k","_len1","_len2","Array","pop","els","iterationAlias","preloadData","cloneNode","nodeName","bindings","sync","elClass","className","trim"],"mappings":"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","file":"../binders.js","sourcesContent":["define([\r\n  \"./rivets\",\r\n  \"./util\",\r\n  \"./views\"\r\n],function(Rivets){\r\n  var __indexOf = [].indexOf;\r\n\r\n  Rivets[\"public\"].binders.text = function(el, value) {\r\n    if (el.textContent != null) {\r\n      return el.textContent = value != null ? value : '';\r\n    } else {\r\n      return el.innerText = value != null ? value : '';\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders.html = function(el, value) {\r\n    return el.innerHTML = value != null ? value : '';\r\n  };\r\n\r\n  Rivets[\"public\"].binders.show = function(el, value) {\r\n    return el.style.display = value ? '' : 'none';\r\n  };\r\n\r\n  Rivets[\"public\"].binders.hide = function(el, value) {\r\n    return el.style.display = value ? 'none' : '';\r\n  };\r\n\r\n  Rivets[\"public\"].binders.enabled = function(el, value) {\r\n    return el.disabled = !value;\r\n  };\r\n\r\n  Rivets[\"public\"].binders.disabled = function(el, value) {\r\n    return el.disabled = !!value;\r\n  };\r\n\r\n  Rivets[\"public\"].binders.checked = {\r\n    publishes: true,\r\n    priority: 2000,\r\n    bind: function(el) {\r\n      return Rivets.Util.bindEvent(el, 'change', this.publish);\r\n    },\r\n    unbind: function(el) {\r\n      return Rivets.Util.unbindEvent(el, 'change', this.publish);\r\n    },\r\n    routine: function(el, value) {\r\n      var _ref1;\r\n      if (el.type === 'radio') {\r\n        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) === (value != null ? value.toString() : void 0);\r\n      } else {\r\n        return el.checked = !!value;\r\n      }\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders.unchecked = {\r\n    publishes: true,\r\n    priority: 2000,\r\n    bind: function(el) {\r\n      return Rivets.Util.bindEvent(el, 'change', this.publish);\r\n    },\r\n    unbind: function(el) {\r\n      return Rivets.Util.unbindEvent(el, 'change', this.publish);\r\n    },\r\n    routine: function(el, value) {\r\n      var _ref1;\r\n      if (el.type === 'radio') {\r\n        return el.checked = ((_ref1 = el.value) != null ? _ref1.toString() : void 0) !== (value != null ? value.toString() : void 0);\r\n      } else {\r\n        return el.checked = !value;\r\n      }\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders.value = {\r\n    publishes: true,\r\n    priority: 3000,\r\n    bind: function(el) {\r\n      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\r\n        this.event = el.tagName === 'SELECT' ? 'change' : 'input';\r\n        return Rivets.Util.bindEvent(el, this.event, this.publish);\r\n      }\r\n    },\r\n    unbind: function(el) {\r\n      if (!(el.tagName === 'INPUT' && el.type === 'radio')) {\r\n        return Rivets.Util.unbindEvent(el, this.event, this.publish);\r\n      }\r\n    },\r\n    routine: function(el, value) {\r\n      var o, _i, _len, _ref1, _ref2, _ref3, _results;\r\n      if (el.tagName === 'INPUT' && el.type === 'radio') {\r\n        return el.setAttribute('value', value);\r\n      } else if (window.jQuery != null) {\r\n        el = jQuery(el);\r\n        if ((value != null ? value.toString() : void 0) !== ((_ref1 = el.val()) != null ? _ref1.toString() : void 0)) {\r\n          return el.val(value != null ? value : '');\r\n        }\r\n      } else {\r\n        if (el.type === 'select-multiple') {\r\n          if (value != null) {\r\n            _results = [];\r\n            for (_i = 0, _len = el.length; _i < _len; _i++) {\r\n              o = el[_i];\r\n              _results.push(o.selected = (_ref2 = o.value, __indexOf.call(value, _ref2) >= 0));\r\n            }\r\n            return _results;\r\n          }\r\n        } else if ((value != null ? value.toString() : void 0) !== ((_ref3 = el.value) != null ? _ref3.toString() : void 0)) {\r\n          return el.value = value != null ? value : '';\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders[\"if\"] = {\r\n    block: true,\r\n    priority: 4000,\r\n    bind: function(el) {\r\n      var attr, declaration;\r\n      if (this.marker == null) {\r\n        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\r\n        declaration = el.getAttribute(attr);\r\n        this.marker = document.createComment(\" rivets: \" + this.type + \" \" + declaration + \" \");\r\n        this.bound = false;\r\n        el.removeAttribute(attr);\r\n        el.parentNode.insertBefore(this.marker, el);\r\n        return el.parentNode.removeChild(el);\r\n      }\r\n    },\r\n    unbind: function() {\r\n      if (this.nested) {\r\n        this.nested.unbind();\r\n        return this.bound = false;\r\n      }\r\n    },\r\n    routine: function(el, value) {\r\n      var key, model, models, _ref1;\r\n      if (!!value === !this.bound) {\r\n        if (value) {\r\n          models = {};\r\n          _ref1 = this.view.models;\r\n          for (key in _ref1) {\r\n            model = _ref1[key];\r\n            models[key] = model;\r\n          }\r\n          (this.nested || (this.nested = new Rivets.View(el, models, this.view.options()))).bind();\r\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling);\r\n          return this.bound = true;\r\n        } else {\r\n          el.parentNode.removeChild(el);\r\n          this.nested.unbind();\r\n          return this.bound = false;\r\n        }\r\n      }\r\n    },\r\n    update: function(models) {\r\n      var _ref1;\r\n      return (_ref1 = this.nested) != null ? _ref1.update(models) : void 0;\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders.unless = {\r\n    block: true,\r\n    priority: 4000,\r\n    bind: function(el) {\r\n      return Rivets[\"public\"].binders[\"if\"].bind.call(this, el);\r\n    },\r\n    unbind: function() {\r\n      return Rivets[\"public\"].binders[\"if\"].unbind.call(this);\r\n    },\r\n    routine: function(el, value) {\r\n      return Rivets[\"public\"].binders[\"if\"].routine.call(this, el, !value);\r\n    },\r\n    update: function(models) {\r\n      return Rivets[\"public\"].binders[\"if\"].update.call(this, models);\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders['on-*'] = {\r\n    \"function\": true,\r\n    priority: 1000,\r\n    unbind: function(el) {\r\n      if (this.handler) {\r\n        return Rivets.Util.unbindEvent(el, this.args[0], this.handler);\r\n      }\r\n    },\r\n    routine: function(el, value) {\r\n      if (this.handler) {\r\n        Rivets.Util.unbindEvent(el, this.args[0], this.handler);\r\n      }\r\n      return Rivets.Util.bindEvent(el, this.args[0], this.handler = this.eventHandler(value));\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders['each-*'] = {\r\n    block: true,\r\n    priority: 4000,\r\n    bind: function(el) {\r\n      var attr, view, _i, _len, _ref1;\r\n      if (this.marker == null) {\r\n        attr = [this.view.prefix, this.type].join('-').replace('--', '-');\r\n        this.marker = document.createComment(\" rivets: \" + this.type + \" \");\r\n        this.iterated = [];\r\n        el.removeAttribute(attr);\r\n        el.parentNode.insertBefore(this.marker, el);\r\n        el.parentNode.removeChild(el);\r\n      } else {\r\n        _ref1 = this.iterated;\r\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\r\n          view = _ref1[_i];\r\n          view.bind();\r\n        }\r\n      }\r\n    },\r\n    unbind: function(el) {\r\n      var view, _i, _len, _ref1;\r\n      if (this.iterated != null) {\r\n        _ref1 = this.iterated;\r\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\r\n          view = _ref1[_i];\r\n          view.unbind();\r\n        }\r\n      }\r\n    },\r\n    routine: function(el, collection) {\r\n      var binding, data, i, index, key, model, modelName, options, previous, template, view, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2, _ref3;\r\n      modelName = this.args[0];\r\n      collection = collection || [];\r\n      if (this.iterated.length > collection.length) {\r\n        _ref1 = Array(this.iterated.length - collection.length);\r\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\r\n          i = _ref1[_i];\r\n          view = this.iterated.pop();\r\n          view.unbind();\r\n          this.marker.parentNode.removeChild(view.els[0]);\r\n        }\r\n      }\r\n      for (index = _j = 0, _len1 = collection.length; _j < _len1; index = ++_j) {\r\n        model = collection[index];\r\n        data = {\r\n          index: index\r\n        };\r\n        data[Rivets[\"public\"].iterationAlias(modelName)] = index;\r\n        data[modelName] = model;\r\n        if (this.iterated[index] == null) {\r\n          _ref2 = this.view.models;\r\n          for (key in _ref2) {\r\n            model = _ref2[key];\r\n            if (data[key] == null) {\r\n              data[key] = model;\r\n            }\r\n          }\r\n          previous = this.iterated.length ? this.iterated[this.iterated.length - 1].els[0] : this.marker;\r\n          options = this.view.options();\r\n          options.preloadData = true;\r\n          template = el.cloneNode(true);\r\n          view = new Rivets.View(template, data, options);\r\n          view.bind();\r\n          this.iterated.push(view);\r\n          this.marker.parentNode.insertBefore(template, previous.nextSibling);\r\n        } else if (this.iterated[index].models[modelName] !== model) {\r\n          this.iterated[index].update(data);\r\n        }\r\n      }\r\n      if (el.nodeName === 'OPTION') {\r\n        _ref3 = this.view.bindings;\r\n        for (_k = 0, _len2 = _ref3.length; _k < _len2; _k++) {\r\n          binding = _ref3[_k];\r\n          if (binding.el === this.marker.parentNode && binding.type === 'value') {\r\n            binding.sync();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    update: function(models) {\r\n      var data, key, model, view, _i, _len, _ref1;\r\n      data = {};\r\n      for (key in models) {\r\n        model = models[key];\r\n        if (key !== this.args[0]) {\r\n          data[key] = model;\r\n        }\r\n      }\r\n      _ref1 = this.iterated;\r\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\r\n        view = _ref1[_i];\r\n        view.update(data);\r\n      }\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders['class-*'] = function(el, value) {\r\n    var elClass;\r\n    elClass = \" \" + el.className + \" \";\r\n    if (!value === (elClass.indexOf(\" \" + this.args[0] + \" \") !== -1)) {\r\n      return el.className = value ? \"\" + el.className + \" \" + this.args[0] : elClass.replace(\" \" + this.args[0] + \" \", ' ').trim();\r\n    }\r\n  };\r\n\r\n  Rivets[\"public\"].binders['*'] = function(el, value) {\r\n    if (value != null) {\r\n      return el.setAttribute(this.type, value);\r\n    } else {\r\n      return el.removeAttribute(this.type);\r\n    }\r\n  };\r\n\r\n  return Rivets[\"public\"].binders;\r\n\r\n});\r\n\r\n"]}